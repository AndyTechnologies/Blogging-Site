---
import HTMLayout from "@/layouts/HTMLayout.astro"
import Posts from "@/components/Posts.astro"
import { getCollection } from "astro:content";

//const allPosts = Object.values(import.meta.glob('./posts/*.md', { eager: true }));
const allPosts = await getCollection("blog");

const posts = allPosts.map((item: any) => {
    return {
        url: `/posts/${item.id}/`,
        name: item.data.title
    };
})


---

<HTMLayout>
	
	<h1>My Astro Learning Blog</h1>
    <p>This is where I will post about my journey learning Astro.</p>

    <Posts posts={posts} />
</HTMLayout>